// Generated by CoffeeScript 1.12.7
(function() {
  var collectItemForCreateModal, createListItem, createModal, createModalCreateButton, createModalNameInput;

  createModal = $('#add-category-modal');

  createModalNameInput = $('#ac-modal-name-input');

  createModalCreateButton = $('#ac-modal-create-button');

  createListItem = $('#create-category-li');

  createListItem.click(function(e) {
    e.preventDefault();
    createModal.modal({
      show: true
    });
    return false;
  });

  createModal.on('hidden.bs.modal', function() {
    return createModalNameInput.val('');
  });

  createModalCreateButton.click(function() {
    createModalNameInput.removeClass('border-danger');
    createModalCreateButton.prop('disabled', true);
    return create_category(collectItemForCreateModal(), function(result) {
      if (result['stat'] === Status.ERROR) {
        createModalNameInput.addClass('border-danger');
        return createModalCreateButton.prop('disabled', false);
      } else if (result['stat'] === Status.COMPLETE) {
        createModalNameInput.addClass('border-success');
        return setTimeout(function() {
          createModalNameInput.val('');
          return location.reload();
        }, 500);
      }
    });
  });

  collectItemForCreateModal = function() {
    return {
      name: escape(createModalNameInput.val()),
      newName: ''
    };
  };

}).call(this);
